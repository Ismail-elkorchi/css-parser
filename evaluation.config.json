{
  "version": 1,
  "profiles": {
    "ci": {
      "requireHoldouts": false,
      "requireBrowserDiff": false,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": false,
      "requireStreamReport": true,
      "requireAgentReport": true,
      "requireConformanceReports": true,
      "requirePackReport": true,
      "requireDocsReport": true,
      "requireBudgetsReport": true,
      "requireBenchReport": false,
      "robustnessUsesFuzz": false,
      "requireBenchStability": false,
      "requireHardGate": true,
      "weights": {
        "correctness": 70,
        "browserDiff": 0,
        "performance": 0,
        "robustness": 10,
        "agentFirst": 15,
        "packagingTrust": 5
      }
    },
    "release": {
      "requireHoldouts": true,
      "requireBrowserDiff": true,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": true,
      "requireStreamReport": true,
      "requireAgentReport": true,
      "requireConformanceReports": true,
      "requirePackReport": true,
      "requireDocsReport": true,
      "requireBudgetsReport": true,
      "requireBenchReport": true,
      "robustnessUsesFuzz": true,
      "requireBenchStability": true,
      "benchStabilityRuns": 9,
      "requireHardGate": true,
      "weights": {
        "correctness": 40,
        "browserDiff": 20,
        "performance": 15,
        "robustness": 10,
        "agentFirst": 10,
        "packagingTrust": 5
      }
    },
    "hard-gate": {
      "requireHoldouts": true,
      "requireBrowserDiff": true,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": true,
      "requireStreamReport": true,
      "requireAgentReport": true,
      "requireConformanceReports": true,
      "requirePackReport": true,
      "requireDocsReport": true,
      "requireBudgetsReport": true,
      "requireBenchReport": true,
      "robustnessUsesFuzz": true,
      "requireBenchStability": true,
      "benchStabilityRuns": 9,
      "requireHardGate": true,
      "weights": {
        "correctness": 40,
        "browserDiff": 20,
        "performance": 15,
        "robustness": 10,
        "agentFirst": 10,
        "packagingTrust": 5
      }
    }
  },
  "thresholds": {
    "conformance": {
      "tokenizer": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "tree": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "encoding": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "serializer": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "holdout": {
        "minPassRate": 1,
        "maxSkips": 0
      }
    },
    "browserDiff": {
      "minAgreement": 0.995,
      "minEnginesPresent": 3,
      "minCases": 500,
      "minTagCoverage": 8,
      "requiredTags": [
        "selectors",
        "at-rules",
        "media-queries",
        "custom-properties",
        "functions/calc",
        "nesting",
        "unicode-range",
        "escape-sequences"
      ]
    },
    "determinism": {
      "requireNode": true,
      "requireCrossRuntimeDeterminism": true,
      "requiredRuntimes": [
        "node",
        "deno",
        "bun"
      ]
    },
    "budgets": {
      "requireBudgetsReport": true,
      "requireNoHangs": true,
      "requireStructuredBudgetErrors": true,
      "requireFuzzReport": true
    },
    "packaging": {
      "forbiddenPaths": [
        "vendor/",
        "test/",
        "codex-prompts/",
        "scripts/"
      ]
    },
    "performanceStability": {
      "maxThroughputRobustSpreadFraction": 0.3,
      "maxMemoryRobustSpreadFraction": 0.01,
      "minThroughputMedianRatio": 0.95,
      "maxMemoryMedianRatio": 1.03
    }
  },
  "weights": {
    "correctness": 40,
    "browserDiff": 20,
    "performance": 15,
    "robustness": 10,
    "agentFirst": 10,
    "packagingTrust": 5
  },
  "performanceBaseline": {
    "notes": "Calibrated from bench-stability medians/minima using postGcHeapUsed measurements (`node --expose-gc`).",
    "benchmarks": {
      "parse-medium": {
        "mbPerSec": 3.16,
        "memoryMB": 7.355
      },
      "parse-large": {
        "mbPerSec": 3.828,
        "memoryMB": 7.376
      }
    }
  },
  "scoring": {
    "passRateScoreShape": "fromThresholdToPerfect",
    "browserAgreementAggregation": "min",
    "performanceAggregation": "geometricMean"
  }
}
