# ADR-007: hard-gate evidence build

Status: Accepted

Date: 2026-02-16

## Context
- Existing gates check pass/fail outcomes for each subsystem.
- Pass/fail alone does not prevent low-evidence or vacuous report regressions.
- Hard-gate set requires strict, falsifiable gates with artifact-backed evidence.

## Decision
- Add a dedicated hard-gate evidence report (`reports/hard-gate.json`) generated by `scripts/eval/check-hard-gate.mjs`.
- Run hard-gate checks in every evaluation profile before gate aggregation.
- Add `G-115 Hard-gate evidence integrity` as a required gate.
- Add profile `hard-gate` and command `npm run eval:hard-gate`.

Hard-gate checks enforce:
- non-vacuous conformance surface for tokenizer/tree/encoding/serializer
- strict conformance outcomes (`failed = 0`, `skipped = 0`)
- holdout rule identity and fraction bounds
- determinism hash shape and case coverage
- stream check IDs and pass status
- agent feature completeness checks
- smoke runtime matrix checks for node/deno/bun
- release-only checks for browser-diff coverage/agreement, fuzz stability and volume, and benchmark coverage
- packaging and docs report integrity checks

## Consequences
- Evaluation failure is immediate when evidence surface regresses, even if a summary report appears green.
- The hard-gate profile is reproducible and machine-checkable.
- No thresholds are lowered; this change tightens acceptance criteria.
